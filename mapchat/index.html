<!DOCTYPE HTML>

<html>
	<head>
		<title>Marauders Map!</title>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
		<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
		<link rel="stylesheet" href="style.css" />
		<script>
		var Lat = 0;
		var Lng = 0;
		var me = new google.maps.LatLng(Lat, Lng);
		var dataRequest = new XMLHttpRequest();
		function init() 
{
		  navigator.geolocation.getCurrentPosition(function(position){
				Lat = position.coords.latitude;
				Lng = position.coords.longitude;
				me = new google.maps.LatLng(Lat, Lng);			
			  var settings = {
					center: me,
					zoom: 15,
					mapTypeId: google.maps.MapTypeId.ROADMAP
				};
				var mapCanvas = new google.maps.Map(document.getElementById('map'), settings);
				mapCanvas.panTo(me);
				var marker = new google.maps.Marker({
						position: me,
						title: "Holy shit it works"
				});
				marker.setMap(mapCanvas);
				var infowindow = new google.maps.InfoWindow();
				google.maps.event.addListener(marker, 'click', function(){
					infowindow.setContent(marker.title);
					infowindow.open(mapCanvas, marker);
				});
				sendData(Lat, Lng);
		});
}
		function sendData(Lat, Lng)
{
		var url = "https://secret-about-box.herokuapp.com/sendLocation";
		var data = "login=CheriVasquez&lat=" + Lat + "&lng=" + Lng + "&message=If%20this%20works%20damn%20son";
		dataRequest.open('POST', 'url', true);
		dataRequest.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
		dataRequest.setRequestHeader('Content-length', data.length);
	  dataRequest.setRequestHeader('Connection', 'close');
		console.log(data);
		dataRequest.send(data);
}
		</script>
       
	
</head>
<body onload="init()">
<div id="map"></div>
</body>
</html>
